@using System.Collections.Specialized
@using Models
@model List<Models.ProductLine>

@section Styles
{
    <link rel="stylesheet" href="~/css/cart.css">   
}

@{
    ViewBag.Title = "Cart";
    Layout = "_Layout";
}


@foreach (var productLine in Model)
{
    <html lang="en">
    <body>
    <main>
        <div class="basket">
            <div class="basket-labels">
                <ul>
                    <li class="item item-heading">Item</li>
                    <li class="price">Price</li>
                    <li class="quantity">Quantity</li>
                    <li class="subtotal">Subtotal</li>
                </ul>
            </div>
            <div class="basket-product">
                <div class="item">
                    <div class="product-image">
                        <img src="@productLine.Product.Images.First().Path" alt="Placholder Image 2" class="product-frame">
                    </div>
                    <div class="product-details">
                        <p>
                            <strong>@productLine.Product.Name</strong>
                        </p>
                        <p>Product Code - @productLine.ProductId</p>
                    </div>
                </div>  
                <div class="price">@productLine.Product.Cost</div>
                <div class="quantity">
                    <input type="number" value="@productLine.ProductCount" min="1" class="quantity-field">
                </div>
                <div class="subtotal">@productLine.Product.Cost</div>
                <div class="remove">
                    <button id="delete-from-cart">Remove</button>
                </div>
            </div>
        </div>
        <aside>
            <div class="summary">
                <div class="summary-total-items"><span class="total-items"></span> Items in your Bag</div>
                <div class="summary-total">
                    <div class="total-title">Total</div>
                    <div class="total-value final-value" id="basket-total">@productLine.Product.Cost</div>
                </div>
                <div class="summary-checkout">
                    <button class="checkout-cta">Go to Checkout</button>
                </div>
            </div>
        </aside>
    </main>
    </body>
    </html>
}
<script>
window.onload = async function () {
    document.getElementById('add-to-cart').addEventListener('click', async function() {
        let response = await fetch("/Cart/RemoveProductLine?productId=@Model.)",
            {
                method: "POST"
            }
        );
    });
}
</script>


